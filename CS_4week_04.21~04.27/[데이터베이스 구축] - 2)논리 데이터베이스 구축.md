# [데이터베이스 구축] - 2)논리 데이터베이스 구축







## 1. 물리 데이터베이스 설계

+ 논리적 구조로 표현된 논리적 DB를 디스크 등의 물리적 저장장치에 저장할 수 있는 물리적 구조의 데이터로 변환하는 과정
+ 물리적 DB 구조의 **기본적인 데이터 단위**는 **저장 레코드**(stored record)이다.
+ 꼭 포함되어야 할 단계
  + **레코드의 양식 설계, 레코드 집중의 분석 및 설계, 접근 경로 설계**

+ 물리 DB구조는 **DB 시스템의 성능에 중대한 영향을 미친다.**
+ 고려 사항
  + **인덱스 구조, 레코드 크기, 파일에 대한 트랜잭션 갱신과 참조 성향, 성능 향상을 위한 개념 스키마 변경 여부 검토** 등
+ 물리적 설계 전에 기존 시스템을 분석하여 **데이터 명명 규칙**, **시스템 자원**, **데이터 베이스 관리 요소** 등을 파악해야 한다.

### 1.1 데이터 명명 규칙 파악

+ 물리 데이터 모델에 적용해야 하는 규칙으로, 조직마다 다를 수 있으므로 데이터 모델의 설계 전에 파악해야 한다.

+ **데이터 표준화** 및 **논리 DB 설계의 결과물** 등을 통해 파악

+ 물리 DB 설계와 논리 DB 설계에 적용되는 명명 규칙은 서로 일관성을 유지해야 한다.

+ 데이터 명명 규칙을 통해 **중복 구축 등을 방지**할 수 있다.

+ 명명 규칙을 파악하려면 도메인과 데이터 사전에 대한 지식 필요

  + 도메인
    + 객체에 포함된 **속성들의 데이터 타입, 크기** 등을 표준화 규칙에 따라 일관성 있게 정의한 것
  + 데이터 사전
    + 전체 프로젝트 과정에서 일관성 있는 데이터 이름과 인터페이스를 제공하기 위해 **속성의 논리명, 물리명, 용어 정의를 기술해 놓은 것**

  

  

### 1.2 시스템 자원 파악

+ 시스템 자원은 DB 설치에 영향을 미칠 수 있는 물리적인 요소들로, 사전에 미리 파악해야 한다.

+ 시스템 자원은 **하드웨어 자원, 운영체제 및 DBMS 버전, DBMS 파라미터 정보** 등으로 구분한다.





### 1.3 데이터베이스 관리 요소 파악

+ DB 관리 요소는 **DB 운영과 관련된 관리 요소**로, **DB 시스템의 환경에 따라 달라질 수 있으므로** 미리 파악해야 한다.
+ 시스템 조사 분석서를 기반으로 DB구조, 이중화 구성, 분산 DB, 접근제어/접근통제, DB 암호화 등의 범위와 특성을 파악한다.







## 2. 데이터베이스 저장 공간 설계

### 2.1 테이블

+ DB의 가장 기본적인 객체로 Row, Column으로 구성되어 있다.
  + DB의 모든 데이터는 테이블에 저장된다.
  + 논리 설계 단계의 **개체에 대응하는 객체**이다.
  + 일반 테이블, 클러스터 인덱스 테이블, 파티셔닝 테이블, 외부 테이블, 임시 테이블 등이 있다.





### 2.2 일반 테이블

+ 현재 사용되는 대부분의 DBMS에서 표준 테이블로 사용되는 테이블 형태
+ 테이블에 저장되는 데이터의 Row 위치는 속성 값에 상관없이 데이터가 저장되는 순서에 따라 결정된다.





### 2.3 클러스터드 인덱스 테이블

+ 기본키나 인덱스키의 순서에 따라 데이터가 저장되는 테이블
  + 일반적인 인덱스를 사용하는 테이블에 비해 **접근 경로가 단축된다.**





### 2.4 파티셔닝 테이블

+ 대용량의 테이블을 작은 논리적 단위인 파티션으로 나눈 테이블
+ 대용량의 데이터를 효과적으로 관리할 수 있지만 **파티션 키를 잘못 구성하면 성능 저하** 등의 역효과 초래 가능

+ 파티셔닝 방식에 따라 **범위 분할**, **해시 분할**, **조합 분할** 등으로 나뉜다.
  + 범위 분할: 지정한 열의 값을 기준으로 분할
  + 해시 분할: 해시 함수를 적용한 결과 값에 따라 데이터를 분할
  + 조합 분할: 범위 분할로 분할한 다음 해시 함수를 적용하여 다시 분할





### 2.5 외부 테이블

+ DB에서 일반 테이블처럼 이용할 수 있는 외부 파일로, DB 내에 객체로 존재한다.
+ 데이터웨어하우스에서 ETL 등의 작업에 유용하게 사용된다.
  + 데이터웨어하우스: 조직이나 기업체의 중심이 되는 주요 업무 시스템에서 추출되어 새로이 생성된 DB
  + ETL: 데이터웨어하우스를 사용하여 **추출**, **변환**, **적재** 하는 일련의 모든 과정





### 2.6 임시 테이블

+ 트랜잭션이나 세션별로 데이터를 저장하고 처리할 수 있는 테이블
+ 임시 테이블에 저장된 데이터는 트랜잭션이 종료되면 삭제





### 2.7 컬럼

+ 컬럼은 테이블의 열을 구성하는 요소로 **데이터 타입, 길이** 등으로 정의된다.
+ **데이터의 일관성 유지를 위해 사용되는 가장 기본적인 것으로, 도메인을 정의한 경우 도메인에 따라 데이터 타입과 길이가 정의된다.**
+ 데이터 타입이나 길이가 다른 칼럼끼리 연산을 하면 DBMS가 내부적으로 데이터 타입 변환 후 연산 수행
+ 데이터 타입과 길이 지정 시 고려 사항
  + 가변 길이 데이터 타입: 예상되는 최대 길이로 정의
  + 고정 길이 데이터 타입: 최소 길이로 지정
  + 소수점 이하 자릿수: 소수점 이하 자릿수는 반올림되어 저장
+ **데이터 타입에 따른 칼럼의 물리적인 순서**
  + 고정 길이 컬럼이고 NOT Null인 컬럼: 앞쪽
  + 가변 길이 컬럼: 뒤쪽
  + Null 값이 많을 것으로 예상되는 칼럼: 뒤쪽





### 2.8 테이블스페이스

+ 테이블이 저장되는 논리적인 영역으로, 하나의 테이블스페이스에 하나 또는 그 이상의 테이블을 저장할 수 있다.
+ 테이블을 저장하면 **논리적으로는 테이블스페이스에 저장**되고, **물리적으로는** 해당 테이블스페이스와 연관된 **데이터 파일에 저장**된다.
  + 즉, **테이블스페이스 - 논리적 영역**, **데이터 파일 - 물리적 영역**
+ DB를 **테이블, 테이블스페이스, 데이터 파일**로 나눠 관리하면 논리적 구성이 물리적 구성에 종속되지 않아 **투명성이 보장**된다.
  + **투명성**: 어떠한 사실이 존재함에도 사실의 존재 여부를 염두에 두지 않도 되는 성질

